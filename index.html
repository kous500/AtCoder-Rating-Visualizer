<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHC Rating Visualizer</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<h1>AHC Rating Visualizer</h1>

<div class="container">
    <section class="input-section">
        <h2>Input</h2>

        <div class="import-group">
            <label for="userId">Import from AtCoder</label>
            <div class="note">Enter AtCoder ID to fetch heuristic contest history.</div>
            <input type="text" id="userId" placeholder="User ID">
            <button id="fetchButton">Fetch Data</button>
            <div id="fetchStatus" class="note"></div>
        </div>

        <div>
            <label for="refDate">Calculation Base Date (UTC+9)</label>
            <div class="note">If the date entered is before 2025, the v1 rating system will be applied.</div>
            <input type="date" id="refDate">

            <label for="contestData">Contest Data</label>
            <div class="note">Format: ContestID,Weight,Performance,EndDate</div>
            <textarea id="contestData"></textarea>
            <!--<textarea id="contestData">
AHC025,1,1438,2023-10-22T10:00:00
AHC026,1,1213,2023-11-05T10:00:00
AHC027,1,1530,2023-12-10T10:00:00
AHC029,1,1317,2023-12-26T12:00:00
AHC030,1,1326,2024-02-19T10:00:00
AHC031,1,1467,2024-04-01T10:00:00
AHC032,1,1446,2024-04-07T14:00:00
AHC033,1,1764,2024-05-27T10:00:00
AHC034,1,902,2024-06-16T10:00:00
AHC036,1,1281,2024-09-02T10:00:00
AHC038,1,1121,2024-10-14T10:00:00
AHC039,1,555,2024-11-10T10:00:00
AHC040,1,1952,2024-12-09T10:00:00
AHC041,0.5,762,2025-01-19T10:00:00
AHC043,1,1611,2025-02-24T10:00:00
AHC045,1,1599,2025-04-07T10:00:00
AHC048,1,2277,2025-06-09T10:00:00
AHC050,0.5,2093,2025-07-06T14:00:00
AHC051,1,2172,2025-08-11T10:00:00
AHC053,0.5,823,2025-09-13T14:00:00
AHC054,1,1244,2025-09-29T10:00:00
AHC056,1,1996,2025-11-17T10:00:00</textarea>-->

            <button id="loadButton">Load Data & Draw</button>
        </div>
    </section>

    <section class="output-section">
        <h2>Visualization</h2>

        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-label">Username</span>
                <span class="stat-value" id="statUsername">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Rating System</span>
                <span class="stat-value" id="statSystem">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Current Base Date</span>
                <span class="stat-value" id="statBaseDate">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Rated Matches</span>
                <span class="stat-value" id="statMatches">0</span>
            </div>
            <div class="stat-item" style="grid-column: span 2;">
                <span class="stat-label">Unadjusted Rating</span>
                <span class="stat-value" id="statRawRating">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Rating</span>
                <span class="stat-value" id="statRating">-</span>
            </div>
        </div>

        <div id="canvas-container">
            <canvas id="ratingCanvas"></canvas>
        </div>

        <div class="animation-controls">
            <div class="control-row">
                <button id="playPauseBtn" aria-label="Play/Pause"></button>
                <div id="currentDateLabel">YYYY-MM-DD</div>
                <input type="range" id="timelineSlider" min="0" max="100" value="100">
            </div>
            <div class="control-row" style="justify-content: flex-end;">
                <label style="margin:0; margin-right:5px; font-size:0.8em;">Speed:</label>
                <select id="speedSelect" class="speed-select">
                    <option value="1">1 hour/frame</option>
                    <option value="2">2 hour/frame</option>
                    <option value="4">4 hour/frame</option>
                    <option value="8">8 hour/frame</option>
                    <option value="24" selected>1 day/frame</option>
                    <option value="48">2 day/frame</option>
                    <option value="96">4 day/frame</option>
                </select>
            </div>
        </div>
    </section>
</div>

<footer>
    <p>Source Code: <a href="https://github.com/kous500/AtCoder-Rating-Visualizer" target="_blank" rel="noopener noreferrer">https://github.com/kous500/AtCoder-Rating-Visualizer</a></p>
</footer>

<script type="module" src="js/main.js"></script>
</body>
</html>